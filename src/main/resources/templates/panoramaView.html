<!DOCTYPE HTML>
<html>
<head>
    <style>
        .custom-hotspot {
            height: 25px;
            width: 50px;
        }
        .custom-hotspot>div{
            height: 25px;
            width: 25px;
        }
        .custom-tooltip-div1{
            border-right: 1px solid rgba(255,255,255,1);
        }
        div.custom-tooltip span {
            position: absolute;
            border-radius: 15px;
            background-color: rgba(0,0,0,0.5);
            color: #ffffff;
            text-align: center;
            max-width: 200px;
            padding: 5px 10px;
            margin-left: -220px;
            cursor: default;
            font-size: 0.5rem;
        }
        .hotspot-choose{
            position: absolute;
            z-index: 99;
            right: 0;
            margin-right: 1vw;
        }
        .hotspot-slot{
            overflow: visible;
            width:60px;
            opacity: 0.7;
            pointer-events: auto;
            border-radius: 15px;
            z-index: 999;
            text-align: center;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 0.9rem;
            color: rgb(233,184,132);
            background-color: rgba(0,0,0,0.5);
            transform: scale(0.8,0.7);
            margin-top: 5px;
        }
        .hotspot-action{
            opacity: 1;
        }
        .spot1 span{
            border-bottom: 1px solid rgb(67, 118, 253);
        }
        .spot2 span{
            border-bottom: 1px solid rgb(39, 255, 53);
        }
        .spot3 span{
            border-bottom: 1px solid rgb(250, 255, 39);
        }
        .park span{
            background-color: rgba(18,138,26,0.5) !important;
            border-bottom: 1px solid rgb(255, 255, 255) !important;
        }
        .school span{
            background-color: rgba(255,138,0,0.5) !important;
            border-bottom: 1px solid rgb(255, 255, 255) !important;
        }
    </style>
</head>
<body>
    <script>
        function hasLoad(){
            window.setTimeout(500);
            $(".home-img-container").remove();
        }
        $(document).ready(function (){
            // Create viewer
            $("#panorama").html("");
            viewer = pannellum.viewer('panorama', {
                "default": {
                    "firstScene": "panorama",
                    "sceneFadeDuration": 1200,
                    //"hotSpotDebug": true,
                    "showControls":false,
                    "hfov": hfov, //缩放
                    "autoLoad":true
                },
                "scenes": {
                    "panorama":{
                        "pitch": -25.456,
                        "yaw": -0.558,
                        "hfov": hfov, //缩放
                        "panorama": "/img/panoramaViewImg/panorama.jpg",
                        "hotSpots":[
                            {
                                "id":"logo",
                                "pitch": -28.304,
                                "yaw": -0.399,
                                "createTooltipFunc": imgSpot,
                                "createTooltipArgs": "logo.png"
                            }
                        ]
                    }
                }
            });
            //hotspot-toggle
            $(".hotspot-slot").click(function(){
                //remove old spot
                let oldSpot =getHotSpotSlot($(".hotspot-action").attr("slot"));
                for(let i=0;i<oldSpot.length;i++){
                    viewer.removeHotSpot(oldSpot[i].id);
                }
                //add new spot
                let newSpot =getHotSpotSlot($(this).attr("slot"));
                for(let i=0;i<newSpot.length;i++){
                    viewer.addHotSpot(newSpot[i]);
                }
                $(this).addClass("hotspot-action");
                $(this).siblings().removeClass("hotspot-action");
            });
        });
        // Hot spot creation function
        function hotspot(hotSpotDiv, args) {
            hotSpotDiv.classList.add('custom-tooltip');
            let span = document.createElement('span');
            let div1 = document.createElement('div');
            div1.classList.add('custom-tooltip-div1');
            span.innerHTML = args;
            hotSpotDiv.appendChild(span);
            hotSpotDiv.appendChild(div1);
            span.style.width = span.scrollWidth - 10 + 'px';
            span.style.marginLeft = -(span.scrollWidth - hotSpotDiv.offsetWidth) / 2 + 'px';
            span.style.marginTop = -span.scrollHeight + 'px';
        }
        function imgSpot(hotSpotDiv, args) {
            let img = $('<img src="/img/icon/'+args+'" class="spot-img-logo" />');
            $(hotSpotDiv).append(img);
        }
        function logospot(hotSpotDiv, args) {
            let div = document.createElement('div');
            let img = $('<img src="/img/logo.png" class="logo-spot-img" />');
            $(hotSpotDiv).append(img);
        }

        function getHotSpotSlot(slot){
            let object = {
                "spot1": [
                    {
                        "id":"spot-type-1",
                        "pitch": -62.92,
                        "yaw": -18.28,
                        "cssClass": "custom-hotspot,spot1,park",
                        "createTooltipFunc": hotspot,
                        "createTooltipArgs": "北庭园"
                    }]
            };
            if(slot){
                return object[slot];
            }
        }
    </script>
</body>
</html>